<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TinTinFlash Co.-確認購物車</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- 加網站logo在網頁 -->
    <link rel="icon" href="./img/logo-02.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/BS-shopping-chart-1.css">
    <style>
        .text-center-input {
            text-align: center;
            padding-left: 0;
            padding-right: 0;
            -webkit-appearance: textfield;
            /* Chrome, Safari, Opera */
            -moz-appearance: textfield;
            /* Firefox */
            appearance: textfield;
            /* Standard */
        }

        /* 移除 input數字輸入框的上下箭頭（可選） */
        .text-center-input::-webkit-inner-spin-button,
        .text-center-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .text-center-input::-moz-inner-spin-button,
        .text-center-input::-moz-outer-spin-button {
            -moz-appearance: none;
            margin: 0;
        }

        .text-center-input {
            -moz-appearance: textfield;
            appearance: textfield;
        }

        #down_btn01,
        #down_btn02,
        #down_btn03 {
            color: #f73c74;
            font-size: 18px;
            font-weight: 600;
        }

        #up_btn01,
        #up_btn02,
        #up_btn03 {
            color: #f73c74;
            font-size: 18px;
            font-weight: 600;
        }

        /* 自定義禁用按鈕的外觀 */
        .disabled {
            opacity: 0.5;
            /* 設置透明度 */
            cursor: not-allowed;
            /* 鼠標顯示為禁止標誌 */
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-white mb-5">
        <div class="container-fluid">
            <a class="navbar-brand mx-3" href="./BS-store.html"><img class="nav-img" src="./img/logo-02.svg" alt=""></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link nav-link-h active text-center" aria-current="page"
                            href="./BS-store.html">Home</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">Portfolio</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">About</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">Contact</a>
                    </li>
                    <div class="row text-center">
                        <div class="col-lg-3 col-6">
                            <li class="nav-item">
                                <a class="nav-link" href="./BS-shopping-chart-1.html"><i class="bi bi-cart4"></i></a>
                            </li>
                        </div>
                        <div class="col">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    <i class="bi bi-person-circle"></i>
                                </a>
                                <ul id="login" class="dropdown-menu">
                                    <li><a class="dropdown-item" href="./login.html">Login</a></li>
                                </ul>
                            </li>
                        </div>

                    </div>

                </ul>
            </div>
        </div>
    </nav>

    <main class="container w-md-100 w-none-100 p-5 mb-5">
        <h2 class="mb-4">購物車</h2>
        <div class="row mb-4">
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 40%"></div>
                    </div>
                    <div class="pbar-circle pbar-circle-1 rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">1</p>
                    </div>
                    <div class="pbar-text pbar-text-1 col-12 m-auto text-center">
                        確認購物車
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="pbar-circle rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">2</p>
                    </div>
                    <div class="pbar-text col-12 m-auto text-center">
                        付款與運送方式
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="pbar-circle rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">3</p>
                    </div>
                    <div class="pbar-text col-12 m-auto text-center">
                        填寫資料
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="pbar-circle rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">4</p>
                    </div>
                    <div class="pbar-text col-12 m-auto text-center">
                        完成訂購
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <h2 class="mb-3">訂單明細</h2>
        <div class="row">
            <div class="col-7 col-md-8 mb-3">
                <div class="row">
                    <div class="card-circle col-4 my-auto">
                        <img class="w-100 rounded-circle" src="./img/white.jpg" alt="">
                    </div>
                    <div class="col my-auto exo-text">
                        <h4 class=" exo-text-1">EXO / EXIST</h4>
                        <p class="exo-text-2 mb-0">(Photo Book Ver.)
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-5 col-md-4 my-auto">
                <div class="row align-items-center ">
                    <div class="col-8">
                        <div class="row ms-xl-5">
                            <div id="down_btn01" type="button" class="col-3 text-center disabled">
                                <p class="mt-1 mb-0">-</p>
                            </div>
                            <div class="col-6 px-0">
                                <input id="number01" type="number" class="form-control text-center text-center-input"
                                    value="1" min="1">
                            </div>
                            <div id="up_btn01" type="button" class="col-3 text-center">
                                <p class="mt-1 mb-0">+</p>
                            </div>
                        </div>
                    </div>
                    <div id="price01" class="col-4 text-end">
                        <p class="mb-0 exo-text-3">NT.1190</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="col-7 col-md-8 mb-3">
                <div class="row ">
                    <div class="card-circle col-4 my-auto">
                        <img class="w-100 rounded-circle" src="./img/light.jpg" alt="">
                    </div>
                    <div class="col my-auto exo-text">
                        <h4 class=" exo-text-1">EXO / EXIST</h4>
                        <p class="exo-text-2 mb-0">(SMini Ver.)
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-5 col-md-4 my-auto">
                <div class="row align-items-center">
                    <div class="col-8">
                        <div class="row ms-xl-5">
                            <div id="down_btn02" type="button" class="col-3 text-center disabled">
                                <p class="mt-1 mb-0">-</p>
                            </div>
                            <div class="col-6 px-0">
                                <input id="number02" type="number" class="form-control text-center text-center-input"
                                    value="1" min="1">
                            </div>
                            <div id="up_btn02" type="button" class="col-3 text-center">
                                <p class="mt-1 mb-0">+</p>
                            </div>
                        </div>
                    </div>
                    <div id="price02" class="col-4 text-end">
                        <p class="mb-0 exo-text-3">NT.412</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="col-7 col-md-8 mb-3">
                <div class="row ">
                    <div class="card-circle col-4 my-auto">
                        <img class="w-100 rounded-circle" src="./img/fire-2.jpg" alt="">
                    </div>
                    <div class="col my-auto exo-text">
                        <h4 class=" exo-text-1">EXO / EXIST</h4>
                        <p class="exo-text-2 mb-0">(Digipack Ver.)
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-5 col-md-4 my-auto">
                <div class="row align-items-center">
                    <div class="col-8">
                        <div class="row ms-xl-5">
                            <div id="down_btn03" type="button" class="col-3 text-center disabled">
                                <p class="mt-1 mb-0">-</p>
                            </div>
                            <div class="col-6 px-0">
                                <input id="number03" type="number" class="form-control text-center text-center-input"
                                    value="1" min="1">
                            </div>
                            <div id="up_btn03" type="button" class="col-3 text-center">
                                <p class="mt-1 mb-0">+</p>
                            </div>
                        </div>
                    </div>
                    <div id="price03" class="col-4 text-end">
                        <p class="mb-0 exo-text-3">NT.836</p>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row text-end mx-auto mb-3 p-0">
                <div class="col">
                    <p>數量</p>
                    <p>小計</p>
                    <p>運費</p>
                    <p class="mb-0 tatal-text">總計</p>
                </div>
                <div class="col-4 col-xl-2">
                    <p id="show_number_all">3</p>
                    <p id="show_price01_all">NT.2438</p>
                    <p>免運</p>
                    <p id="show_price02_all" class="mb-0 tatal-text">NT.2438</p>
                </div>
            </div>
            <hr>
        </div>


        <div class="row">
            <div class="back-btn col-5 col-sm-6 text-start my-auto mb-3">
                <a class="icon-link icon-link-hover" href="./BS-store.html">
                    <i class="back-btn-text bi bi-arrow-left mb-2"></i>
                    <p class="back-btn-text mb-0">返回購物</p>
                </a>
            </div>
            <div class="next-btn col-8 col-sm-6 text-end my-auto mb-2">
                <a href="./BS-shopping-chart-2.html">
                    <button type="button" class="next-btn-btn btn btn-lg px-5 ">
                        <p class="next-btn-text mb-0">下一步</p>
                    </button>
                </a>
            </div>
        </div>
    </main>
    <footer class="container-fluid bg-white">

        <div class="row p-4">
            <div class="col-12 col-sm-4 col-md-4 col-lg-2 text-center">
                <a class="navbar-brand mx-2" href="#"><img class="nav-img m-2" src="./img/logo-02.svg" alt=""></a>
            </div>
            <p class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 my-auto text-center footer-text ">That's Right My
                Tight :D</p>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">歷代專輯</p>
                        <p class="mb-0">正規七輯</p>
                        <p class="mb-0">正規六輯</p>
                        <p class="mb-0">正規五輯</p>
                        <p class="mb-0">正規四輯</p>

                    </div>
                </div>

            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">成員介紹</p>
                        <p class="mb-0">吳世勳</p>
                        <p class="mb-0">金鍾仁</p>
                        <p class="mb-0">邊伯賢</p>
                        <p class="mb-0">We Are One</p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">晚餐推薦</p>
                        <p class="mb-0">菲力牛排</p>
                        <p class="mb-0">沙朗牛排</p>
                        <p class="mb-0">翼板牛排</p>
                        <p class="mb-0">肋眼牛排</p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">甜點精選</p>
                        <p class="mb-0">戚風蛋糕</p>
                        <p class="mb-0">千層蛋糕</p>
                        <p class="mb-0">融心布朗尼</p>
                        <p class="mb-0">薄巧冰淇淋</p>

                    </div>
                </div>
            </div>
        </div>

    </footer>

    <div class="footer-nav container-fluid p-3">
        <div class="row">
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 ">
                <div class="row mx-3">
                    <a class="col-2 my-auto text-end" href="#"><i class="bi bi-c-circle"></i></a>
                    <p class="col my-auto p-0 footer-nav-text">2024 TinTinFlash Co.</p>
                </div>
            </div>
            <div class="col-12 col-sm-6">
                <div class="row mx-3">
                    <a class="col-2 my-auto text-end" href="#"><i class="bi bi-at"></i></a>
                    <p class="col my-auto p-0 footer-nav-text">tintinflash_1121</p>
                </div>
            </div>
        </div>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>

    <script>
        // DOMContentLoaded = 當初始的HTML 文件被完全載入和解析完成時觸發，這個事件的觸發意味著頁面結構已經就緒，可以安全地執行JavaScript 程式碼
        // 通常情況下，會將需要在頁面載入後立即執行的 JavaScript 程式碼放在DOMContentLoaded 事件監聽器中，以確保在頁面完全載入後執行這些操作。

        // getElementById = 是 JavaScript 中的一個方法，用于通過元素的 id 属性獲取檔案中的特定元素
        // 如果有多個元素具有相同的id，getElementById 只會傳回第一個符合的元素
        // 如果需要取得多個元素，可以考慮使用 querySelector 或getElementsByClassName 等方法

        document.addEventListener('DOMContentLoaded', function () {

            // 定義所有需要的元素
            let items = [
                { downBtn: 'down_btn01', upBtn: 'up_btn01', numberInput: 'number01', priceElement: 'price01', basePrice: 1190 },
                { downBtn: 'down_btn02', upBtn: 'up_btn02', numberInput: 'number02', priceElement: 'price02', basePrice: 412 },
                { downBtn: 'down_btn03', upBtn: 'up_btn03', numberInput: 'number03', priceElement: 'price03', basePrice: 836 }
            ];

            let showNumberAll = document.getElementById('show_number_all');
            let showPrice01All = document.getElementById('show_price01_all');
            let showPrice02All = document.getElementById('show_price02_all');



            // 更新總數和總價的函數
            function updateTotals() {
                let totalNumber = 0;
                let totalPrice = 0;

                // 存儲各個商品的價格
                items.forEach((item, index) => {
                    let quantity = parseInt(document.getElementById(item.numberInput).value, 10);
                    let price = quantity * item.basePrice;
                    localStorage.setItem(`price0${index + 1}`, `NT.${price}`);
                });

                items.forEach(item => {
                    let quantity = parseInt(document.getElementById(item.numberInput).value, 10);
                    totalNumber += quantity;
                    totalPrice += quantity * item.basePrice;
                });
                showNumberAll.textContent = totalNumber;
                showPrice01All.textContent = `NT.${totalPrice}`;
                showPrice02All.textContent = `NT.${totalPrice}`;

                // 下方商品明細
                // 將資料存入 localStorage
                localStorage.setItem('showNumberAll', totalNumber);
                localStorage.setItem('showPrice01All', `NT.${totalPrice}`);
                localStorage.setItem('showPrice02All', `NT.${totalPrice}`);

                // 保存每個商品的數量
                items.forEach(item => {
                    let quantity = document.getElementById(item.numberInput).value;
                    localStorage.setItem(item.numberInput, quantity);
                });
            }

            // 恢復保存的數據
            let savedTotalNumber = localStorage.getItem('showNumberAll');
            let savedTotalPrice01 = localStorage.getItem('showPrice01All');
            let savedTotalPrice02 = localStorage.getItem('showPrice02All');

            if (savedTotalNumber) {
                showNumberAll.textContent = savedTotalNumber;
                showPrice01All.textContent = savedTotalPrice01;
                showPrice02All.textContent = savedTotalPrice02;
            }

            // 恢復每個商品的數量
            items.forEach(item => {
                let savedQuantity = localStorage.getItem(item.numberInput);
                if (savedQuantity) {
                    document.getElementById(item.numberInput).value = savedQuantity;
                }
            });

            // 初始化按鈕事件
            items.forEach(item => {
                let downBtn = document.getElementById(item.downBtn);
                let upBtn = document.getElementById(item.upBtn);
                let numberInput = document.getElementById(item.numberInput);
                let priceElement = document.getElementById(item.priceElement);

                // 更新單個商品的小計和設定按鈕狀態
                function updateItemTotal() {
                    let quantity = parseInt(numberInput.value, 10);
                    let totalPrice = quantity * item.basePrice;
                    priceElement.textContent = `NT.${totalPrice}`;

                    // 上方訂單明細的數量跟價格
                    // 保存數量和價格到localStorage
                    localStorage.setItem(item.numberInput, quantity);
                    localStorage.setItem(item.priceElement, `NT.${totalPrice}`);

                    // 檢查是否禁用減少按鈕(數量等於1時會變透透的)
                    if (quantity === 1) {
                        downBtn.classList.add('disabled'); // 添加禁用類
                    } else {
                        downBtn.classList.remove('disabled'); // 移除禁用類
                    }

                    updateTotals();
                }

                downBtn.addEventListener('click', function () {
                    if (numberInput.value > 1) {
                        numberInput.value = parseInt(numberInput.value, 10) - 1;
                        updateItemTotal();
                    }
                });

                upBtn.addEventListener('click', function () {
                    numberInput.value = parseInt(numberInput.value, 10) + 1;
                    updateItemTotal();
                });

                numberInput.addEventListener('change', updateItemTotal);

                updateItemTotal(); // 初始化時更新
            });

            updateTotals(); // 初始化總數和總價
        });
    </script>





</body>

</html>