<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TinTinFlash Co.-填寫資料</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- 加網站logo在網頁 -->
    <link rel="icon" href="./img/logo-02.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/BS-shopping-chart-3.css">

    <style>
        #emailError {
            color: #ce2121;
            display: none;
            /* 初始隱藏 */
            margin-left: 10px;
            margin-top: 5px;
            /* 距離輸入框一定距離 */
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-white mb-5">
        <div class="container-fluid">
            <a class="navbar-brand mx-3" href="./BS-store.html"><img class="nav-img" src="./img/logo-02.svg" alt=""></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link nav-link-h active text-center" aria-current="page"
                            href="./BS-store.html">Home</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">Portfolio</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">About</a>
                    </li>
                    <li class="nav-item text-center">
                        <a class="nav-link nav-link-h" href="#">Contact</a>
                    </li>
                    <div class="row text-center">
                        <div class="col-lg-3 col-6">
                            <li class="nav-item">
                                <a class="nav-link" href="./BS-shopping-chart-1.html"><i class="bi bi-cart4"></i></a>
                            </li>
                        </div>
                        <div class="col">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    <i class="bi bi-person-circle"></i>
                                </a>
                                <ul id="login" class="dropdown-menu">
                                    <li><a class="dropdown-item" href="./login.html">Login</a></li>
                                </ul>
                            </li>
                        </div>

                    </div>

                </ul>
            </div>
        </div>
    </nav>

    <main class="container w-md-100 w-none-100 p-5 mb-5">
        <h2 class="mb-4">購物車</h2>
        <div class="row mb-4">
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress progress-1" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="pbar-circle pbar-circle-1 rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">1</p>
                    </div>
                    <div class="pbar-text pbar-text-1 col-12 m-auto text-center">
                        確認購物車
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress progress-1" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 40%"></div>
                    </div>
                    <div class="pbar-circle pbar-circle-1 rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">2</p>
                    </div>
                    <div class="pbar-text pbar-text-1 col-12 m-auto text-center">
                        付款與運送方式
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: 40%"></div>
                    </div>
                    <div class="pbar-circle pbar-circle-1 rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">3</p>
                    </div>
                    <div class="pbar-text pbar-text-1 col-12 m-auto text-center">
                        填寫資料
                    </div>
                </div>
            </div>
            <div class="col-3 pbar-box">
                <div class="row">
                    <div class="pbar-circle rounded-circle col-12 m-auto mb-3 text-center">
                        <p class="pbar-circle-text text-center">4</p>
                    </div>
                    <div class="pbar-text col-12 m-auto text-center">
                        完成訂購
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <h2 class="mb-3">寄送資料</h2>
        <div class="row">
            <div class="mb-3 col-12">
                <label for="name" class="form-label">姓名</label>
                <input type="name" class="form-control" id="name" placeholder="請輸入姓名" required>
            </div>
            <div class="mb-3 col-12">
                <label for="phone_number" class="form-label">行動電話</label>
                <input type="text" class="form-control numeric-input" id="phone_number" placeholder="例如：0911210905"
                    required>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="例如：weareone1485@gmail.com" required>
                <div id="emailError" class="invalid-feedback">請輸入有效email</div>
            </div>

            <div class="mb-3 col-6">
                <label for="address_number" class="form-label ">地址</label>
                <input type="address" class="form-control" id="address_number" placeholder="郵遞區號" required>
            </div>
            <div class="mb-3 col-6">
                <label for="address01" class="form-label font-white ">地址</label>
                <input type="address" class="form-control" id="address01" placeholder="縣市 (例如：彰化縣員林市)" required>
            </div>

            <div class="mb-3">
                <!-- <label for="exampleFormControlTextarea1" class="form-label"></label> -->
                <textarea class="form-control" id="address02" placeholder="地址" rows="3" required></textarea>
            </div>
        </div>
        <hr>

        <div class="row text-end mx-auto mb-3 p-0">
            <div class="col">
                <p>數量</p>
                <p>小計</p>
                <p>運費</p>
                <p class="mb-0 tatal-text">總計</p>
            </div>
            <div class="col-4 col-xl-2">
                <p id="show_number_all">3</p>
                <p id="show_price01_all">NT.2438</p>
                <p>免運</p>
                <p id="show_price02_all" class="mb-0 tatal-text">NT.2438</p>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="next-btn col-8 col-sm-6 text-start my-auto mb-2">
                <a href="./BS-shopping-chart-2.html">
                    <button type="button" class="next-btn-btn next-btn-btn-1 btn btn-lg px-5 ">
                        <p class="back-btn-text mb-0">上一步</p>
                    </button>
                </a>
            </div>
            <div class="next-btn col-8 col-sm-6 text-end my-auto mb-2">
                <a href="./BS-shopping-chart-4.html">
                    <button id="nextButton" type="button" class="next-btn-btn btn btn-lg px-5 ">
                        <p class="next-btn-text mb-0">確認付款</p>
                    </button>
                </a>
            </div>
        </div>
    </main>

    <footer class="container-fluid bg-white">

        <div class="row p-4">
            <div class="col-12 col-sm-4 col-md-4 col-lg-2 text-center">
                <a class="navbar-brand mx-2" href="#"><img class="nav-img m-2" src="./img/logo-02.svg" alt=""></a>
            </div>
            <p class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 my-auto text-center footer-text ">That's Right My
                Tight :D</p>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">歷代專輯</p>
                        <p class="mb-0">正規七輯</p>
                        <p class="mb-0">正規六輯</p>
                        <p class="mb-0">正規五輯</p>
                        <p class="mb-0">正規四輯</p>

                    </div>
                </div>

            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">成員介紹</p>
                        <p class="mb-0">吳世勳</p>
                        <p class="mb-0">金鍾仁</p>
                        <p class="mb-0">邊伯賢</p>
                        <p class="mb-0">We Are One</p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">晚餐推薦</p>
                        <p class="mb-0">菲力牛排</p>
                        <p class="mb-0">沙朗牛排</p>
                        <p class="mb-0">翼板牛排</p>
                        <p class="mb-0">肋眼牛排</p>

                    </div>
                </div>
            </div>
            <div class="col-12 col-sm-2 text-center p-3">
                <div class="row">
                    <div class="col">
                        <p class="footer-nav-text-1">甜點精選</p>
                        <p class="mb-0">戚風蛋糕</p>
                        <p class="mb-0">千層蛋糕</p>
                        <p class="mb-0">融心布朗尼</p>
                        <p class="mb-0">薄巧冰淇淋</p>

                    </div>
                </div>
            </div>
        </div>

    </footer>

    <div class="footer-nav container-fluid p-3">
        <div class="row">
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 ">
                <div class="row mx-3">
                    <a class="col-2 my-auto text-end" href="#"><i class="bi bi-c-circle"></i></a>
                    <p class="col my-auto p-0 footer-nav-text">2024 TinTinFlash Co.</p>
                </div>
            </div>
            <div class="col-12 col-sm-6">
                <div class="row mx-3">
                    <a class="col-2 my-auto text-end" href="#"><i class="bi bi-at"></i></a>
                    <p class="col my-auto p-0 footer-nav-text">tintinflash_1121</p>
                </div>
            </div>
        </div>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let numericInputs = document.querySelectorAll('.numeric-input');

            numericInputs.forEach(input => {
                input.addEventListener('input', function () {
                    // 移除非數字字符
                    let sanitizedValue = input.value.replace(/\D/g, '');

                    // 更新輸入框的值
                    input.value = sanitizedValue;
                });
            });

            // 獲取表單元素
            let nameInput = document.getElementById('name');
            let phoneInput = document.getElementById('phone_number');
            let emailInput = document.getElementById('email');
            let emailError = document.getElementById('emailError');
            let addressNumberInput = document.getElementById('address_number');
            let address01Input = document.getElementById('address01');
            let address02Input = document.getElementById('address02');

            emailInput.addEventListener('input', function () {
                let email = emailInput.value;
                if (!isValidEmail(email)) {
                    emailError.style.display = 'block'; // 顯示錯誤訊息
                } else {
                    emailError.style.display = 'none'; // 隱藏錯誤訊息
                }
            });

            function isValidEmail(email) {
                return /\S+@\S+\.\S+/.test(email);
            }

            // 讀取 localStorage 中的資料，並填充表單欄位
            if (localStorage.getItem('userDataSaved')) {
                nameInput.value = localStorage.getItem('name');
                phoneInput.value = localStorage.getItem('phone');
                emailInput.value = localStorage.getItem('email');
                addressNumberInput.value = localStorage.getItem('address_number');
                address01Input.value = localStorage.getItem('address01');
                address02Input.value = localStorage.getItem('address02');
            }

            // 監聽表單欄位的輸入事件，將輸入的值存入 localStorage
            nameInput.addEventListener('input', function () {
                localStorage.setItem('name', nameInput.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            phoneInput.addEventListener('input', function () {
                localStorage.setItem('phone', phoneInput.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            emailInput.addEventListener('input', function () {
                localStorage.setItem('email', emailInput.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            addressNumberInput.addEventListener('input', function () {
                localStorage.setItem('address_number', addressNumberInput.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            address01Input.addEventListener('input', function () {
                localStorage.setItem('address01', address01Input.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            address02Input.addEventListener('input', function () {
                localStorage.setItem('address02', address02Input.value.trim());
                localStorage.setItem('userDataSaved', true);
            });

            // 下方商品明細
            // 獲取 localStorage 中存儲的數據
            let totalNumber = localStorage.getItem('showNumberAll');
            let totalPrice = localStorage.getItem('showPrice01All');
            let totalPriceWithShipping = localStorage.getItem('showPrice02All');

            // 更新頁面上的元素
            if (totalNumber && totalPrice && totalPriceWithShipping) {
                document.getElementById('show_number_all').textContent = totalNumber;
                document.getElementById('show_price01_all').textContent = totalPrice;
                document.getElementById('show_price02_all').textContent = totalPriceWithShipping;
            }

            // 必須填寫資料才可按確認付款
            let nextButton = document.getElementById('nextButton');
            nextButton.addEventListener('click', function (event) {
                // 檢查是否有任何必填欄位為空
                let name = document.getElementById('name').value.trim();
                let phone = document.getElementById('phone_number').value.trim();
                let email = document.getElementById('email').value.trim();
                let address_number = document.getElementById('address_number').value.trim();
                let address01 = document.getElementById('address01').value.trim();
                let address02 = document.getElementById('address02').value.trim();

                if (name === '' || phone === '' || email === '' || address_number === '' || address01 === '' || address02 === '') {
                    // 阻止默認行為 (前往下一步) 如果有任何欄位為空
                    event.preventDefault();
                    alert('請輸入完整寄送資料 (╬☉д⊙)');
                    // 可選擇性地，可以突顯空白欄位或提供更具體的反饋。
                } else {
                    alert('付款成功！感謝您的購買 (´▽`ʃ♡ƪ)~♥');
                }
            });
        });
    </script>
</body>

</html>